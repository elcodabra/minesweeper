(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(0),s=n.n(r),c=n(8),o=n.n(c),u=n(2),a=(n(29),n(7)),l=n(5),b=n(4),d=n(16),m=function(e,t){for(var n=0;!n||e.indexOf(n)>-1;)n=Math.round(Math.random()*t);return n},j=function(e,t,n){if(!e)return null;var i=[e],r=e%n||n,s=Math.ceil(e/n);return r-1>0&&(i.push(e-1),s-1>0&&i.push(e-1-n),s+1<=t&&i.push(e-1+n)),s-1>0&&i.push(e-n),s+1<=t&&i.push(e+n),r+1<=n&&(i.push(e+1),s-1>0&&i.push(e+1-n),s+1<=t&&i.push(e+1+n)),i},f=function(e,t,n,i){return j(e,t,n).filter((function(e){return i.indexOf(e)>-1})).length},p=new function(){return new Worker(n.p+"static/js/file.worker.4c8c0726.worker.js")},O=Object(a.b)({sortComparer:function(e,t){return e-t}}),h=Object(a.c)({name:"cells",initialState:O.getInitialState({rows:10,columns:10,bombsSize:10,isGame:!1,isStarted:!1,failedCell:null,completed:0,opened:0,bombs:[]}),reducers:{setNewGame:function(e){e.isGame=!1},setInitial:function(e,t){var n=t.payload,i=n.rows,r=n.columns,s=n.bombsSize;e.rows=i,e.columns=r,e.bombsSize=s;var c=i*r;e.isGame=!0,e.isStarted=!1;var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t,i){return e+i*n};return Array.from({length:(t-e)/n+1},i)}(1,c,1,(function(e,t){return{id:t+1}}));O.setAll(e,o)},setOpened:function(e,t){var n=t.payload;e.isStarted||(e.isStarted=!0,e.bombs=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=[],r=0;r<t;r++)i[r]=m([].concat(i,Object(d.a)(n)),e);return i.sort((function(e,t){return e-t}))}(e.rows*e.columns,e.bombsSize,[n])),e.isStarted&&e.bombs.indexOf(n)>-1?(e.failedCell=n,e.entities[n].isFailed=!0,e.entities[n].isBomb=!0,e.ids.filter((function(t){return void 0===e.entities[t].number})).forEach((function(t){var n=e.bombs.indexOf(t)>-1;e.entities[t].isBomb=n,e.entities[t].number=n?0:f(t,e.rows,e.columns,e.bombs)}))):p.postMessage(JSON.parse(JSON.stringify({id:n,rows:e.rows,columns:e.columns,bombs:e.bombs})))},setNumbers:function(e,t){var n=t.payload;e.ids.filter((function(t){return void 0!==n[t]&&void 0===e.entities[t].number})).forEach((function(t){e.entities[t].number=n[t],e.opened+=1,e.entities[t].isCompleted&&(e.entities[t].isComplete=!1,e.completed-=1)}))},setCompleted:function(e,t){var n=t.payload,i=e.entities[n];i.isCompleted=!i.isCompleted,e.completed+=i.isCompleted?1:-1}}}),v=h.actions,x=v.setNewGame,g=v.setInitial,C=v.setOpened,w=v.setCompleted,S=v.setNumbers,y=O.getSelectors(),N=(y.selectAll,y.selectById),z=y.selectIds,F=function(e){return!e.failedCell&&(e.completed===e.bombsSize&&e.opened+e.completed===e.rows*e.columns||null)},k=function(e){return e.rows},G=function(e){return e.columns},I=function(e){return e.bombsSize},M=function(e){return e.bombsSize-e.completed},B=function(e){return e.isGame},A=h.reducer,E=n(15),L=n.n(E),J=(n(30),function(e){var t=e.id,n=Object(u.b)(),r=Object(u.c)(M),s=Object(u.c)((function(e){return N(e,t)})),c=s.number,o=s.isBomb,a=s.isCompleted,l=s.isFailed,b=c||0===c;return Object(i.jsx)("span",{className:L()("Cell",{"Cell--opened":b},{"Cell--failed":l}),onClick:function(){a||b||n(C(t))},onContextMenu:function(e){e.preventDefault(),!b&&r&&n(w(t))},children:b&&o?"\ud83d\udca3":a&&!b?"\u26f3":b&&(c||"")})}),T=s.a.memo(J),D=function(){var e=Object(u.c)(M);return Object(i.jsxs)("p",{children:["Left bombs: ",e]})},P=(n(31),function(){var e=Object(u.c)(z),t=Object(u.c)(G),n=Object(u.c)(F);return Object(i.jsxs)("div",{className:"Field",children:[Object(i.jsx)(D,{}),null!==n&&Object(i.jsxs)("div",{className:"Field-message",children:[n&&Object(i.jsx)("p",{children:"Your win!"}),!n&&Object(i.jsx)("p",{children:"Fail!"})]}),Object(i.jsx)("div",{className:"Field-container",style:{gridTemplateColumns:"repeat(".concat(t,", 50px [col-start])"),pointerEvents:null!==n?"none":"all"},children:e.map((function(e){return Object(i.jsx)(T,{id:e},"cell_".concat(e))}))})]})}),W=n(17),Y=function(){var e=Object(u.c)(k),t=Object(u.c)(G),n=Object(u.c)(I),s=Object(u.b)(),c=Object(r.useState)({rows:e,columns:t,bombsSize:n}),o=Object(W.a)(c,2),a=o[0],d=o[1],m=function(e){e.target.name&&e.target.value&&d(Object(b.a)(Object(b.a)({},a),{},Object(l.a)({},e.target.name,parseInt(e.target.value.trim()))))};return Object(i.jsxs)("div",{children:["New Game!",Object(i.jsx)("input",{type:"number",name:"rows",value:a.rows,onChange:m}),Object(i.jsx)("input",{type:"number",name:"columns",value:a.columns,onChange:m}),Object(i.jsx)("input",{type:"number",name:"bombsSize",value:a.bombsSize,onChange:m}),Object(i.jsx)("button",{onClick:function(){return s(g(a))},children:"Go!"})]})},_=function(){var e=Object(u.b)();return Object(i.jsx)("span",{style:{cursor:"pointer",paddingLeft:20},onClick:function(){return e(x())},children:"\ud83d\ude0a"})};n(32);var q=function(){var e=Object(u.c)(B);return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsxs)("p",{children:["Mine Sweeper",Object(i.jsx)(_,{})]}),e?Object(i.jsx)(P,{}):Object(i.jsx)(Y,{})]})})},H=Object(a.a)({reducer:A}),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),s(e),c(e)}))};o.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(u.a,{store:H,children:Object(i.jsx)(q,{})})}),document.getElementById("root")),K(),p.addEventListener("message",(function(e){H.dispatch(S(e.data))}))}},[[33,1,2]]]);
//# sourceMappingURL=main.b03db2de.chunk.js.map